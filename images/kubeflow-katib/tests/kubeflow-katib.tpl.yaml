---
apiVersion: config.kubeflow.org/v1beta1
kind: KatibConfig
init:
  certGenerator:
    enable: true
  controller:
    webhookPort: 8443
    trialResources:
      - Job.v1.batch
      - TFJob.v1.kubeflow.org
      - PyTorchJob.v1.kubeflow.org
      - MPIJob.v1.kubeflow.org
      - XGBoostJob.v1.kubeflow.org
      - MXJob.v1.kubeflow.org
runtime:
  metricsCollectors:
    - kind: StdOut
      image: ${IMAGE_REPOSITORY_FILE_METRICSCOLLECTOR}
    - kind: File
      image: ${IMAGE_REPOSITORY_FILE_METRICSCOLLECTOR}
    - kind: TensorFlowEvent
      image: docker.io/kubeflowkatib/tfevent-metrics-collector:latest
      resources:
        limits:
          memory: 1Gi
  suggestions:
    - algorithmName: random
      image: ${IMAGE_REPOSITORY_SUGGESTION_HYPEROPT}
    - algorithmName: tpe
      image: ${IMAGE_REPOSITORY_SUGGESTION_HYPEROPT}
    - algorithmName: grid
      image: ${IMAGE_REPOSITORY_SUGGESTION_OPTUNAS}
    - algorithmName: hyperband
      image: ${IMAGE_REPOSITORY_SUGGESTION_HYPERBAND}
    - algorithmName: bayesianoptimization
      image: ${IMAGE_REPOSITORY_SUGGESTION_SKOPT}
    - algorithmName: cmaes
      image: ${IMAGE_REPOSITORY_SUGGESTION_GOPTUNA}
    - algorithmName: sobol
      image: ${IMAGE_REPOSITORY_SUGGESTION_GOPTUNA}
    - algorithmName: multivariate-tpe
      image: ${IMAGE_REPOSITORY_SUGGESTION_OPTUNA}
    - algorithmName: enas
      image: docker.io/kubeflowkatib/suggestion-enas:latest
      resources:
        limits:
          memory: 200Mi
    - algorithmName: darts
      image: ${IMAGE_REPOSITORY_SUGGESTION_NAS_DARTS}
    - algorithmName: pbt
      image: ${IMAGE_REPOSITORY_SUGGESTION_PBT}
      persistentVolumeClaimSpec:
        accessModes:
          - ReadWriteMany
        resources:
          requests:
            storage: 5Gi
  earlyStoppings:
    - algorithmName: medianstop
      image: ${IMAGE_REPOSITORY_EARLYSTOPPING}
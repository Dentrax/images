contents:
  packages:
    - spark-3.5.0-compat

accounts:
  # The bitnami image depends on the group being 0
  users:
    - username: spark
      uid: 1001
      gid: 0
  run-as: 1001

environment:
  BITNAMI_APP_NAME: "spark"
  JAVA_HOME: "/usr/lib/jvm/java-17-openjdk"
  LIBNSS_WRAPPER_PATH: ""

# The various 0775 permissions below are for Domino, which run as uid:gid 1000:0
paths:
  - path: /opt/bitnami/spark/conf
    type: directory
    uid: 1001
    gid: 0
    permissions: 0o775
    recursive: true
  - path: /opt/bitnami/spark/logs
    type: directory
    uid: 1001
    gid: 0
    permissions: 0o775
  - path: /opt/bitnami/spark/tmp
    type: directory
    uid: 1001
    gid: 0
    permissions: 0o775

entrypoint:
  command: /opt/bitnami/scripts/spark/entrypoint.sh /opt/bitnami/scripts/spark/run.sh
